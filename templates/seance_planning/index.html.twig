{% extends 'frontCoach.html.twig' %}

{% block slider %}
{% endblock %}

        {% block change %}
            <link rel="stylesheet" href="{{ asset('bundles/mercuryseriesflashy/css/flashy.css') }}">

            <!-- Web Font -->
            <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
            <link rel="stylesheet" href="https://maxst.icons8.com/vue-static/landings/line-awesome/line-awesome/1.3.0/css/line-awesome.min.css">

            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fullcalendar@5.6.0/main.min.css"
                  integrity="sha256-uq9PNlMzB+1h01Ij9cx7zeE2OR2pLAfRw3uUUOOPKdA="
                  crossorigin="anonymous">

            <script src="https://cdn.jsdelivr.net/npm/fullcalendar@5.6.0/main.min.js"
                    integrity="sha256-ekrJn2FeZaiUFq99QswpQCUTME/HxaDfX7R8INzKJGE="
                    crossorigin="anonymous"></script>


            <link href='fullcalendar/main.css' rel='stylesheet' />
            <script src='fullcalendar/main.js'></script>
            <style>
                #calendar{
                    width: 80%;
                    margin: auto;
                }
            </style>
            <script>


                document.addEventListener('DOMContentLoaded', function() {
                    var calendarEl = document.getElementById('calendar');
                    var calendar = new FullCalendar.Calendar(calendarEl, {
                        initialView: 'dayGridMonth',
                        locale: 'fr',
                        timeZone: 'Europe/Paris',
                        headerToolbar: {
                            start: 'prev,next today',
                            center: 'title',
                            end: 'dayGridMonth,timeGridWeek'
                        },

                        events: [
                            {% set i = 0  %}
                            {% for seance_planning in seance_plannings %}
                            {% set foo = seance_plannings|length %}

                            {
                                title:' {{ seance_planning.summary }} ',
                                start: '{{ seance_planning.date }} {{ seance_planning.startsAt }}',
                                end: '{{ seance_planning.date }} {{ seance_planning.finishsAt }}',
                                description: '{{ seance_planning.description }}'
                            }
                            {% set i = i+1  %}

                            {% if foo > i %}
                            ,
                            {% endif %}


                            {% endfor %}

                        ],
                        nowIndicator:true
                    });
                    calendar.render();
                });


            </script>
            {% block title_planning_clients %}  {% endblock %}

            {% block body_planning_clients %}
                <br>
                <div class="container" style='display:inline-block';>
                    <input class="form-control" id="myInput" type="text" id="navbar-search-input" placeholder="Rechercher ici..." aria-label="search" aria-describedby="search">

                </div>
                <div style='display:inline-block'; >
                    <a href="{{ path('seance_planning_new') }}" class="btn btn-info">Add a Meeting</a>

                </div>
                <br>
                <br/>

                <table class="table table-responsive" , id="hi">
                    <thead>
                    <tr>
                        {# <th style="text-align:center">Id</th> #}

                        <th style="text-align:center">Client UserName</th>
                        <th style="text-align:center">Summary</th>
                        <th style="text-align:center">Description</th>
                        <th style="text-align:center">Date</th>
                        <th style="text-align:center">Starts At</th>
                        <th style="text-align:center">Finishs At</th>
                        <th style="text-align:center">Localisation</th>
                        <th style="text-align:center">actions</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for seance_planning in seance_plannings %}
                        <tr>
                            {# <td>{{ seance_planning.id }}</td> #}

                            <td>{{ seance_planning.userName }}</td>
                            <td>{{ seance_planning.summary }}</td>
                            <td>{{ seance_planning.description }}</td>
                            <td style="text-align:center">{{ seance_planning.date }}</td>
                            <td style="text-align:center">{{ seance_planning.startsAt }}</td>
                            <td style="text-align:center">{{ seance_planning.finishsAt }}</td>
                            <td>{{ seance_planning.localisation }}</td>
                            <td style="text-align:center">
                                <a href="{{ path('seance_planning_show', {'id': seance_planning.id}) }}"class="btn btn-primary">show</a>
                                <a href="{{ path('seance_planning_edit', {'id': seance_planning.id}) }}"class="btn btn-info">edit</a>
                            </td>
                        </tr>
                    {% else %}
                        <tr>
                            <td colspan="9">no records found</td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>



                <br/>


            {% endblock %}

            <!-- recherche script-->
            <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
            <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
            <script>
                $(document).ready(function(){
                    $("#myInput").on("keyup", function() {
                        var value = $(this).val().toLowerCase();
                        $("#hi tr").filter(function() {
                            $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
                        });
                    });
                });
            </script>

            <div id='calendar'></div>

            <!-- Flashy depends on jQuery -->
            <script src="//code.jquery.com/jquery.js"></script>
            <!-- Load Flashy default JavaScript -->
            <script src="{{ asset('bundles/mercuryseriesflashy/js/flashy.js') }}"></script>
            <!-- Include Flashy default partial -->
            {{ include('@MercurySeriesFlashy/flashy.html.twig') }}

        {% endblock %}


